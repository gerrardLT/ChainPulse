🚀 产品需求文档（PRD）
项目名称：ChainPulse — 实时链上事件通知与可视化系统
一、产品概述
1.1 背景

在 Web3 应用中，用户无法实时获知合约事件（如交易成功、质押变更、NFT领取等），通常需手动刷新页面或查看区块浏览器，交互体验极差。
ChainPulse 旨在解决这个问题 —— 通过 Envio 事件索引 + 智能账户（Smart Account）集成 + 实时推送 & 可视化看板，让用户即时收到链上事件提醒，并通过动态数据面板直观展示整个系统状态。

1.2 产品定位

一个结合 实时通知、链上监听、智能账户集成与可视化展示 的 Web3 工具型平台。
黑客松重点展示系统的：

技术完整度（前后端 + Envio + 智能合约）

交互体验（实时更新、推送提醒）

可扩展潜力（可嵌入各种DApp或Dashboard）

二、产品目标
目标类型	说明
🔔 实时性	用户在智能账户中触发任意链上事件后，前端立即可视化显示并发送通知。
📊 可视化	将事件流以动态图表呈现，包括交易量、活跃钱包、交互类型占比。
🧠 智能化	通过智能账户实现“自动响应逻辑”，如事件触发后执行指定操作（例如：自动转账或二次签名）。
🧩 可扩展	后续可接入更多链、更多事件类型及跨平台通知（Discord / Telegram）。
三、核心功能模块
3.1 模块结构
├── 1. 智能账户模块（Smart Account）
│   ├── 用户注册/连接钱包
│   ├── 合约绑定（Account Abstraction）
│   ├── 自动执行逻辑（AA hooks）

├── 2. 链上事件监听模块（Envio Indexer）
│   ├── 合约事件定义（JSON ABI）
│   ├── Envio 实时索引 + GraphQL 查询接口
│   ├── WebSocket 推送服务

├── 3. 实时通知模块
│   ├── 前端接收推送（Socket.IO / WebSocket）
│   ├── 用户通知中心（含消息过滤/分组）
│   ├── 声音 & 动画提醒

├── 4. 数据可视化面板
│   ├── 交易事件时间轴
│   ├── 钱包活跃图表（24h趋势）
│   ├── 智能账户执行状态看板

├── 5. 可扩展通知集成
│   ├── Telegram Bot 通知
│   ├── Discord Webhook
│   ├── 邮件 / 浏览器推送（可选）

└── 6. 用户体验增强
    ├── 多语言国际化（i18n）
    ├── 主题切换（明暗模式）
    ├── 响应式设计

四、功能详情与优先级（MVP范围）
优先级	模块	功能描述
⭐⭐⭐	Envio 监听	使用 Envio 配置自定义合约事件索引，监听实时事件流
⭐⭐⭐	前端通知系统	WebSocket + 动画推送提醒（如"你刚完成一次转账"）
⭐⭐	智能账户	集成 Biconomy / Stackup Smart Account，实现自动操作响应
⭐⭐	数据可视化仪表盘	实时更新图表（活跃账户、交易量趋势）
⭐⭐	国际化支持	支持中英文切换，可扩展更多语言
⭐⭐	主题切换	支持明暗模式切换，自动跟随系统主题
⭐	第三方通知集成	Telegram / Discord 机器人推送
⭐	历史事件查询	通过 GraphQL 查询历史事件记录
五、用户角色与场景
用户类型	行为	示例场景
普通用户	连接钱包、订阅事件、查看通知	“有人给我发了 NFT，系统实时提示我”
DApp 开发者	部署监听模板、集成通知API	“我把ChainPulse嵌入到我自己的DApp中”
黑客松评委	查看可视化面板演示	“在几秒内看见合约事件更新的炫酷可视化图”
六、技术架构
6.1 前端

框架：Next.js + Tailwind CSS + Framer Motion

数据流：WebSocket / GraphQL Subscriptions

UI组件库：Radix UI + Shadcn/UI

可视化：Recharts / D3.js / ECharts

6.2 后端

事件索引：Envio Indexer（部署自定义 index.yaml）

API层：GraphQL + Node.js（用于聚合 Envio 数据）

实时通信：Socket.IO / Pusher Channels

数据库：Supabase / PostgreSQL（缓存事件数据）

6.3 智能合约层

标准：ERC-4337（Account Abstraction）

实现方案：Stackup / Biconomy SDK

功能：允许事件触发后由智能账户自动执行脚本（如转账、状态更新）

七、系统交互流程（数据流）
[1] 用户触发交易 → 
[2] Envio 捕获事件并索引 →
[3] 后端推送事件(JSON) →
[4] 前端通过 WebSocket 接收 →
[5] 动态通知 + 图表实时刷新 →
[6] 用户可设置响应逻辑（Smart Account 执行）
